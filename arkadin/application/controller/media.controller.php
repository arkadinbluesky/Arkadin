<?phpif (!defined('SIZE_BACKUP')){    define("SIZE_BACKUP", 1024);}if (!defined('SIZE_SITE_MAX')){    define("SIZE_SITE_MAX", 890);}if (!defined('SIZE_MINIATURE_BIG')){    define("SIZE_MINIATURE_BIG", 250);}if (!defined('SIZE_MINIATURE_SMALL')){    define("SIZE_MINIATURE_SMALL", 158);}class media extends Controller{    public $module_group = "Media";    public $method_administration = array("user", "roles");    function index()    {        $this->title = __("Medias");        $this->ariane = "> " . $this->title;    }    function photo()    {        include_once LIB . 'imageprocessor.lib.php';        $_SQL = Singleton::getInstance(SQL_DRIVER);        $sql = "SELECT *, a.id as id_photo from species_picture_main a		INNER JOIN species_tree_name b ON a.id_species_main = b.id		INNER JOIN species_translation z ON z.id_row = a.id_species_main and id_table = 7		WHERE a.id_history_etat = 1		ORDER BY date_validated DESC LIMIT 0,20";        $res = $_SQL->sql_query($sql);        $data['species_picture_main'] = $_SQL->sql_to_array($res);        foreach ($data['species_picture_main'] as $value)        {            $sql = "SELECT a.date, c.action, c.point,b.name, b.id, b.firstname,d.iso 			FROM history_main a			INNER JOIN user_main b ON a.id_user_main = b.id			INNER JOIN history_action c ON c.id = a.id_history_action			INNER JOIN geolocalisation_country d ON b.id_geolocalisation_country = d.id			WHERE line = " . $value['id_photo'] . " AND id_history_table = 10";            $res = $_SQL->sql_query($sql);            $data['history'][$value['id_photo']] = $_SQL->sql_to_array($res);            //echo $sql;        }        $this->set("data", $data);    }    /*      SELECT a.date, c.title, c.point,b.name, b.id, b.firstname,d.iso      FROM history_main a      INNER JOIN user_main b ON a.id_user_main = b.id      INNER JOIN history_action c ON c.id = a.id_history_action      INNER JOIN geolocalisation_country d ON b.id_geolocalisation_country = d.id      WHERE line = 281 AND id_history_table = 10      SELECT a.date, c.title, c.point,b.name, b.id, b.firstname,d.iso FROM history_main a INNER JOIN user_main b ON a.id_user_main = b.id INNER JOIN history_action c ON c.id = a.id_history_action INNER JOIN geolocalisation_country d ON b.id_geolocalisation_country = d.id WHERE line = 120590 AND id_history_table = 10     */    function video()    {            }    function sound()    {            }    function articles()    {            }}?>